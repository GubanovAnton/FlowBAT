{"version":3,"sources":["meteor://ðŸ’»app/common/users.defaults.coffee"],"names":["getInitials","userPreSave","name","firstLetters","firstWords","_","first","replace","trim","split","length","substring","map","word","charAt","join","toUpperCase","userId","changes","ref","profile","initials","Meteor","users","before","insert","user","defaults","isNew","isInvitation","invitations","numRecs","dashboardQueryIds","isRealName","call","update","fieldNames","modifier","options","$set"],"mappings":";;;;;;;;;AAAA,IAAAA,WAAA,EAAAC,WAAA;;AAAAD,cAAc,UAACE,IAAD;AACZ,MAAAC,YAAA,EAAAC,UAAA;AAAAA,eAAaC,EAAEC,KAAF,CAAQJ,KAAKK,OAAL,CAAa,MAAb,EAAqB,GAArB,EAA0BC,IAA1B,GAAiCC,KAAjC,CAAuC,GAAvC,CAAR,EAAqD,CAArD,CAAb;;AACA,MAAGL,WAAWM,MAAX,GAAoB,CAAvB;AACEP,mBAAeC,WAAW,CAAX,EAAcO,SAAd,CAAwB,CAAxB,EAA2B,CAA3B,CAAf;AADF;AAGER,mBAAeE,EAAEO,GAAF,CAAMR,cAAc,EAApB,EAAwB,UAACS,IAAD;AAIrC,aAHAA,KAAKC,MAAL,CAAY,CAAZ,CAGA;AAJa,OACGC,IADH,CACQ,EADR,CAAf;AAMD;;AACD,SALAZ,aAAaa,WAAb,EAKA;AAZY,CAAd;;AASAf,cAAc,UAACgB,MAAD,EAASC,OAAT;AACZ,MAAAC,GAAA;;AAAA,OAAAA,MAAAD,QAAAE,OAAA,YAAAD,IAAoBjB,IAApB,GAAoB,MAApB;AACEgB,YAAQE,OAAR,CAAgBC,QAAhB,GAA2BrB,YAAYkB,QAAQE,OAAR,CAAgBlB,IAA5B,CAA3B;AAQD;;AAPD,MAAGgB,QAAQ,cAAR,CAAH;AASE,WARAA,QAAQ,kBAAR,IAA8BlB,YAAYkB,QAAQ,cAAR,CAAZ,CAQ9B;AACD;AAbW,CAAd;;AAMAI,OAAOC,KAAP,CAAaC,MAAb,CAAoBC,MAApB,CAA2B,UAACR,MAAD,EAASS,IAAT;AACzBrB,IAAEsB,QAAF,CAAWD,IAAX,EACE;AAAAE,WAAO,IAAP;AACAC,kBAAc,KADd;AAEAC,iBAAa;AAFb,GADF;;AAKAzB,IAAEsB,QAAF,CAAWD,KAAKN,OAAhB,EACE;AAAAW,aAAS,EAAT;AACAC,uBAAmB,EADnB;AAEAC,gBAAY;AAFZ,GADF;;AAeA,SAVAhC,YAAYiC,IAAZ,CAAiB,IAAjB,EAAoBjB,MAApB,EAA4BS,IAA5B,CAUA;AArBF;AAaAJ,OAAOC,KAAP,CAAaC,MAAb,CAAoBW,MAApB,CAA2B,UAAClB,MAAD,EAASS,IAAT,EAAeU,UAAf,EAA2BC,QAA3B,EAAqCC,OAArC;AAYzB,SAXArC,YAAYiC,IAAZ,CAAiB,IAAjB,EAAoBjB,MAApB,EAA4BoB,SAASE,IAAT,IAAiB,EAA7C,CAWA;AAZF,4E","file":"/common/users.defaults.coffee","sourcesContent":["getInitials = (name) ->\n  firstWords = _.first(name.replace(/\\s+/g, \" \").trim().split(\" \"), 2)\n  if firstWords.length < 2\n    firstLetters = firstWords[0].substring(0, 2)\n  else\n    firstLetters = _.map(firstWords || [], (word) ->\n      word.charAt(0)).join(\"\")\n  firstLetters.toUpperCase()\n\nuserPreSave = (userId, changes) ->\n  if changes.profile?.name\n    changes.profile.initials = getInitials(changes.profile.name)\n  if changes[\"profile.name\"]\n    changes[\"profile.initials\"] = getInitials(changes[\"profile.name\"])\n\nMeteor.users.before.insert (userId, user) ->\n  _.defaults(user,\n    isNew: true\n    isInvitation: false\n    invitations: []\n  )\n  _.defaults(user.profile,\n    numRecs: 10\n    dashboardQueryIds: []\n    isRealName: false\n  )\n  userPreSave.call(@, userId, user)\n\nMeteor.users.before.update (userId, user, fieldNames, modifier, options) ->\n  userPreSave.call(@, userId, modifier.$set || {})\n"]}