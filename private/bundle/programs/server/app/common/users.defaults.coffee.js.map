{"version":3,"sources":["users.defaults.coffee"],"names":[],"mappings":";AAAA;;AAAA,cAAc,SAAC,IAAD;AACZ;AAAA,eAAa,CAAC,CAAC,KAAF,CAAQ,IAAI,CAAC,OAAL,CAAa,MAAb,EAAqB,GAArB,CAAyB,CAAC,IAA1B,EAAgC,CAAC,KAAjC,CAAuC,GAAvC,CAAR,EAAqD,CAArD,CAAb;AACA,MAAG,UAAU,CAAC,MAAX,GAAoB,CAAvB;AACE,mBAAe,UAAW,GAAE,CAAC,SAAd,CAAwB,CAAxB,EAA2B,CAA3B,CAAf,CADF;GAAA;AAGE,mBAAe,CAAC,CAAC,GAAF,CAAM,cAAc,EAApB,EAAwB,SAAC,IAAD;aACrC,IAAI,CAAC,MAAL,CAAY,CAAZ,EADqC;IAAA,CAAxB,CACE,CAAC,IADH,CACQ,EADR,CAAf,CAHF;GADA;SAMA,YAAY,CAAC,WAAb,GAPY;AAAA,CAAd;;AAAA,WASA,GAAc,SAAC,MAAD,EAAS,OAAT;AACZ;AAAA,6CAAkB,CAAE,aAApB;AACE,WAAO,CAAC,OAAO,CAAC,QAAhB,GAA2B,YAAY,OAAO,CAAC,OAAO,CAAC,IAA5B,CAA3B,CADF;GAAA;AAEA,MAAG,OAAQ,gBAAX;WACE,OAAQ,oBAAR,GAA8B,YAAY,OAAQ,gBAApB,EADhC;GAHY;AAAA,CATd;;AAAA,MAeM,CAAC,KAAK,CAAC,MAAM,CAAC,MAApB,CAA2B,SAAC,MAAD,EAAS,IAAT;AACzB,GAAC,CAAC,QAAF,CAAW,IAAX,EACE;AAAA,WAAO,IAAP;AAAA,IACA,cAAc,KADd;AAAA,IAEA,aAAa,EAFb;GADF;AAAA,EAKA,CAAC,CAAC,QAAF,CAAW,IAAI,CAAC,OAAhB,EACE;AAAA,aAAS,EAAT;AAAA,IACA,mBAAmB,EADnB;AAAA,IAEA,YAAY,KAFZ;GADF,CALA;SAUA,WAAW,CAAC,IAAZ,CAAiB,IAAjB,EAAoB,MAApB,EAA4B,IAA5B,EAXyB;AAAA,CAA3B,CAfA;;AAAA,MA4BM,CAAC,KAAK,CAAC,MAAM,CAAC,MAApB,CAA2B,SAAC,MAAD,EAAS,IAAT,EAAe,UAAf,EAA2B,QAA3B,EAAqC,OAArC;SACzB,WAAW,CAAC,IAAZ,CAAiB,IAAjB,EAAoB,MAApB,EAA4B,QAAQ,CAAC,IAAT,IAAiB,EAA7C,EADyB;AAAA,CAA3B,CA5BA","file":"/common/users.defaults.coffee.js","sourcesContent":["getInitials = (name) ->\n  firstWords = _.first(name.replace(/\\s+/g, \" \").trim().split(\" \"), 2)\n  if firstWords.length < 2\n    firstLetters = firstWords[0].substring(0, 2)\n  else\n    firstLetters = _.map(firstWords || [], (word) ->\n      word.charAt(0)).join(\"\")\n  firstLetters.toUpperCase()\n\nuserPreSave = (userId, changes) ->\n  if changes.profile?.name\n    changes.profile.initials = getInitials(changes.profile.name)\n  if changes[\"profile.name\"]\n    changes[\"profile.initials\"] = getInitials(changes[\"profile.name\"])\n\nMeteor.users.before.insert (userId, user) ->\n  _.defaults(user,\n    isNew: true\n    isInvitation: false\n    invitations: []\n  )\n  _.defaults(user.profile,\n    numRecs: 10\n    dashboardQueryIds: []\n    isRealName: false\n  )\n  userPreSave.call(@, userId, user)\n\nMeteor.users.before.update (userId, user, fieldNames, modifier, options) ->\n  userPreSave.call(@, userId, modifier.$set || {})\n"]}