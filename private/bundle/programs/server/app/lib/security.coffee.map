{"version":3,"sources":["meteor://ðŸ’»app/lib/security.coffee"],"names":["indexOf","share","Security","effectiveRoles","admin","analyst","groups","Object","keys","currentUserHasRole","role","hasRole","Meteor","userId","userIdCanChangeUserGroupOrRemove","user","_id","users","findOne","call","group"],"mappings":";;;;;;;;;AAAA,IAAAA,UAAA,GAAAA,OAAA;AAAAC,MAAMC,QAAN,GACE;AAAAC,kBACE;AAAAC,WAAO,CAAC,OAAD,EAAU,SAAV,CAAP;AACAC,aAAS,CAAC,OAAD,EAAU,SAAV;AADT,GADF;AAGAC,UAAQ;AAIN,WAHAC,OAAOC,IAAP,CAAY,KAACL,cAAb,CAGA;AAPF;AAKAM,sBAAoB,UAACC,IAAD;AAKlB,WAJAT,MAAMC,QAAN,CAAeS,OAAf,CAAuBC,OAAOC,MAAP,EAAvB,EAAwCH,IAAxC,CAIA;AAVF;AAOAI,oCAAkC,UAACD,MAAD,EAASE,IAAT;AAMhC,WALAF,WAAYE,KAAKC,GAAjB,IAAyB,KAACL,OAAD,CAASE,MAAT,EAAiB,OAAjB,CAKzB;AAbF;AASAF,WAAS,UAACE,MAAD,EAASH,IAAT;AACP,QAAAK,IAAA;AAAAA,WAAOH,OAAOK,KAAP,CAAaC,OAAb,CAAqBL,MAArB,CAAP;;AACA,QAAGE,IAAH;AACE,UAAGf,QAAAmB,IAAA,CAAQlB,MAAMC,QAAN,CAAeC,cAAf,CAA8BY,KAAKK,KAAnC,CAAR,EAAAV,IAAA,MAAH;AACE,eAAO,IAAP;AAFJ;AAWC;;AARD,WAAO,KAAP;AALO;AATT,CADF,0E","file":"/lib/security.coffee","sourcesContent":["share.Security =\n  effectiveRoles:\n    admin: [\"admin\", \"analyst\"]\n    analyst: [\"admin\", \"analyst\"]\n  groups: ->\n    Object.keys(@effectiveRoles)\n  currentUserHasRole: (role) ->\n    share.Security.hasRole(Meteor.userId(), role)\n  userIdCanChangeUserGroupOrRemove: (userId, user) ->\n    userId isnt user._id and @hasRole(userId, \"admin\")\n  hasRole: (userId, role) ->\n    user = Meteor.users.findOne(userId)\n    if user\n      if role in share.Security.effectiveRoles[user.group]\n        return true\n    return false\n"]}