{"version":3,"sources":["meteor://ðŸ’»app/server/executingAt.query.hooks.coffee"],"names":["indexOf","share","Queries","before","update","userId","query","fieldNames","modifier","options","$set","_","has","executingInterval","executingAt","Date","getTime","after","skipResetTimeout","call","periodicExecution","resetTimeout"],"mappings":";;;;;;;;;AAAA,IAAAA,UAAA,GAAAA,OAAA;AAAAC,MAAMC,OAAN,CAAcC,MAAd,CAAqBC,MAArB,CAA4B,UAACC,MAAD,EAASC,KAAT,EAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,OAAtC;AAC1B,MAAGD,SAASE,IAAZ;AACE,QAAGC,EAAEC,GAAF,CAAMJ,SAASE,IAAf,EAAqB,mBAArB,CAAH;AACE,UAAGF,SAASE,IAAT,CAAcG,iBAAjB;AAGE,eAFAL,SAASE,IAAT,CAAcI,WAAd,GAA4B,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuBR,SAASE,IAAT,CAAcG,iBAA9C,CAE5B;AAHF;AAKE,eAFAL,SAASE,IAAT,CAAcI,WAAd,GAA4B,IAE5B;AANJ;AADF;AAUC;AAXH;AAQAb,MAAMC,OAAN,CAAce,KAAd,CAAoBb,MAApB,CAA2B,UAACC,MAAD,EAASC,KAAT,EAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,OAAtC;AACzB,MAAGA,QAAQS,gBAAX;AACE;AAOD;;AAND,MAAGlB,QAAAmB,IAAA,CAAiBZ,UAAjB,yBAAgCD,MAAMQ,WAAzC;AAQE,WAPAb,MAAMmB,iBAAN,CAAwBC,YAAxB,EAOA;AACD;AAZH,2E","file":"/server/executingAt.query.hooks.coffee","sourcesContent":["share.Queries.before.update (userId, query, fieldNames, modifier, options) ->\n  if modifier.$set\n    if _.has(modifier.$set, \"executingInterval\")\n      if modifier.$set.executingInterval\n        modifier.$set.executingAt = new Date(new Date().getTime() + modifier.$set.executingInterval)\n      else\n        modifier.$set.executingAt = null\n\nshare.Queries.after.update (userId, query, fieldNames, modifier, options) ->\n  if options.skipResetTimeout\n    return\n  if \"executingAt\" in fieldNames and query.executingAt\n    share.periodicExecution.resetTimeout()"]}