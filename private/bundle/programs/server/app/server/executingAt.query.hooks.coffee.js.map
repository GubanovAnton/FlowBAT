{"version":3,"sources":["executingAt.query.hooks.coffee"],"names":[],"mappings":";AAAA;;AAAA,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,MAArB,CAA4B,SAAC,MAAD,EAAS,KAAT,EAAgB,UAAhB,EAA4B,QAA5B,EAAsC,OAAtC;AAC1B,MAAG,QAAQ,CAAC,IAAZ;AACE,QAAG,CAAC,CAAC,GAAF,CAAM,QAAQ,CAAC,IAAf,EAAqB,mBAArB,CAAH;AACE,UAAG,QAAQ,CAAC,IAAI,CAAC,iBAAjB;eACE,QAAQ,CAAC,IAAI,CAAC,WAAd,GAAgC,SAAS,UAAM,CAAC,OAAP,EAAJ,GAAuB,QAAQ,CAAC,IAAI,CAAC,iBAA1C,EADlC;OAAA;eAGE,QAAQ,CAAC,IAAI,CAAC,WAAd,GAA4B,KAH9B;OADF;KADF;GAD0B;AAAA,CAA5B;;AAAA,KAQK,CAAC,OAAO,CAAC,KAAK,CAAC,MAApB,CAA2B,SAAC,MAAD,EAAS,KAAT,EAAgB,UAAhB,EAA4B,QAA5B,EAAsC,OAAtC;AACzB,MAAG,OAAO,CAAC,gBAAX;AACE,WADF;GAAA;AAEA,MAAG,eAAiB,UAAjB,yBAAgC,KAAK,CAAC,WAAzC;WACE,KAAK,CAAC,iBAAiB,CAAC,YAAxB,GADF;GAHyB;AAAA,CAA3B,CARA","file":"/server/executingAt.query.hooks.coffee.js","sourcesContent":["share.Queries.before.update (userId, query, fieldNames, modifier, options) ->\n  if modifier.$set\n    if _.has(modifier.$set, \"executingInterval\")\n      if modifier.$set.executingInterval\n        modifier.$set.executingAt = new Date(new Date().getTime() + modifier.$set.executingInterval)\n      else\n        modifier.$set.executingAt = null\n\nshare.Queries.after.update (userId, query, fieldNames, modifier, options) ->\n  if options.skipResetTimeout\n    return\n  if \"executingAt\" in fieldNames and query.executingAt\n    share.periodicExecution.resetTimeout()"]}